\frametitle{Optimization in Datalog: Encoding Rewrites}
     A rewrite can add new terms and new equalities:

     \begin{lstlisting}[language=Python]
// comm-add
eql(xy,yx), add(x,y,xy) :-
  add(y,x,yx), xy=$Add(x,y).
    \end{lstlisting}
    \pause
    \begin{lstlisting}[language=Python]
// assoc-add
eql(xy_z,x_yz), add(xy,z,xy_z), add(x,y,xy) :-
  add(y,z,yz), add(x,yz,x_yz),
  xy = $Add(x,y), xy_z = $Add(xy,z).
    \end{lstlisting}
